<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Ensueño - Restaurante</title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta content="Free Website Template" name="keywords">
	<meta content="Free Website Template" name="description">
	<!-- Favicon -->
	<link th:href="@{/img/favicon.ico}" href="../static/img/favicon.ico" rel="icon">
	<link rel="icon" href="/img/logo.png">

	<!-- Google Font -->
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link th:href="@{/css/styles.css}" rel="stylesheet">
	<link th:href="@{/css/diarios.css}" rel="stylesheet">
	<link
		th:href="'https://fonts.googleapis.com/css2?family=Montserrat:wght@200;400&family=Roboto:wght@400;500;700&display=swap'"
		rel="stylesheet">

	<!-- Agrega el enlace a la biblioteca Owl Carousel -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">

	<!-- Font Awesome -->
	<link th:href="'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css'" rel="stylesheet">

	<!-- Libraries Stylesheet -->
	<link th:href="@{/lib/owlcarousel/assets/owl.carousel.min.css}"
		href="../static/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
	<link th:href="@{/lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css}"
		href="../static/lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

	<!-- Customized Bootstrap Stylesheet -->
	<link th:href="@{/css/style.min.css}" href="../static/css/style.min.css" rel="stylesheet">

</head>

<body>
	<!-- Navbar Start -->
	<div class="container-fluid p-0 nav-bar">
		<nav class="navbar navbar-expand-lg bg-none navbar-dark py-3">
			<a th:href="@{/home/principal}" class="navbar-brand px-lg-4 m-0">
				<img src="/img/logo.png" alt="Logo de Ensueño" style="max-height: 90px;">
			</a>
			<button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
				<div class="navbar-nav ml-auto p-4">
					<a th:href="@{/home/nosotros}" class="nav-item nav-link" style="font-size: smaller;">Nosotros</a>
					<div class="nav-item dropdown">
						<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown"
							style="font-size: smaller;">Galeria</a>
						<div class="dropdown-menu text-capitalize">
							<a th:href="@{/home/galeria_platos}" class="dropdown-item"
								style="font-size: smaller;">Platos</a>
							<a th:href="@{/home/galeria_ambientes}" class="dropdown-item"
								style="font-size: smaller;">Ambientes</a>
						</div>
					</div>
					<a th:href="@{/home/carta_pescados}" class="nav-item nav-link" style="font-size: smaller;">Carta</a>
					<a th:href="@{/home/menu}" class="nav-item nav-link" style="font-size: smaller;">Menu</a>
					<a th:href="@{/home/reservas}" class="nav-item nav-link" style="font-size: smaller;">Reservas</a>
					<a th:href="@{/home/login}" class="nav-item nav-link" style="font-size: smaller;">Inicia Sesión o
						Regístrate</a>
				</div>
			</div>
		</nav>
	</div>
	<!-- Navbar End -->
	<!-- Carousel Start -->
	<div class="container-fluid p-0 mb-5">
		<div id="blog-carousel" class="carousel slide overlay-bottom" data-ride="carousel">
			<div class="carousel-inner">
				<div class="carousel-item active">
					<img class="w-100" src="/img/fettuccine_camaron.jpg" alt="Image">
					<div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
						<h1 class="display-1 text-white m-0">¡¡Bienvenidos!!</h1>
						<br>
						<h2 class="text-white m-0">Cocinamos con amor para alimentar tu alma.</h2>
					</div>
				</div>
				<div class="carousel-item">
					<img class="w-100" src="/img/marina.jpg" alt="Image">
					<div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
						<h1 class="display-1 text-white m-0">¡¡Bienvenidos!!</h1>
						<br>
						<h2 class="text-white m-0">¡Disfrute su experiencia
							culinaria con nosotros!</h2>
					</div>
				</div>
			</div>
			<a class="carousel-control-prev" href="#blog-carousel" data-slide="prev">
				<span class="carousel-control-prev-icon"></span>
			</a>
			<a class="carousel-control-next" href="#blog-carousel" data-slide="next">
				<span class="carousel-control-next-icon"></span>
			</a>
		</div>
	</div>
	<!-- Carousel End -->
	<!-- Service Start -->
	<div class="container-fluid pt-5">
		<div class="container">
			<div class="section-title" style="margin-top: -150px">
				<h4 class="text-primary text-uppercase" style="letter-spacing: 5px;">Nosotros</h4>
			</div>
			<div class="row">
				<div class="row align-items-center">
					<div class="col-sm-5">
						<img class="img-fluid" src="/img/nosotros.jpg" alt="">
					</div>
					<div class="col-sm-7">
						<h4><i class="fa fa-utensils service-icon"></i>Restaurante Ensueño</h4>
						<p class="m-0">En Ensueño Restaurant, nos enorgullece ser especialistas en la preparación de
							deliciosos platos a base de especies de la laguna. Nos dedicamos apasionadamente a resaltar
							los sabores únicos y frescos que este entorno nos ofrece. Nuestros talentosos chefs crean
							platos excepcionales que celebran la riqueza de la fauna acuática local, asegurando que cada
							bocado sea una experiencia culinaria inigualable.
							Ubicados en un entorno pintoresco con impresionantes vistas a la laguna, invitamos a
							nuestros estimados clientes a disfrutar de estos tesoros naturales en un ambiente tranquilo
							y acogedor. En Ensueño Restaurant, nos esforzamos por llevar a su mesa los sabores
							auténticos de la laguna, creando recuerdos gastronómicos inolvidables en cada visita. Únase
							a nosotros para explorar la magia de los ingredientes locales y
							degustar el auténtico sabor de la laguna en cada plato que servimos.</p>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Service End -->
	<!-- About Start -->
	<div class="container-fluid py-5">
		<div class="container">
			<div class="section-title" style="margin-top: -95px">
				<h4 class="text-primary text-uppercase" style="letter-spacing: 5px;">Galería</h4>
			</div>
			<div class="row">
				<div class="col-lg-4 py-0 py-lg-5 text-center">
					<h1 class="mb-3">Platos</h1>
					<p>Descubre una exhibición de exquisiteces culinarias en nuestra galería de platos, donde cada
						imagen cuenta la historia de la pasión y la creatividad que infundimos en cada creación. Desde
						exquisitos mariscos frescos hasta coloridos platos vegetarianos, cada fotografía captura la
						esencia de nuestra dedicación por ofrecer una experiencia gastronómica inolvidable. Sumérgete en
						un mundo de sabores y texturas únicos, meticulosamente preparados para deleitar tus sentidos y
						satisfacer tu paladar. Explora nuestra galería y déjate llevar por el arte culinario que
						despierta la curiosidad y el apetito en cada imagen que compartimos.</p>
					<a th:href="@{/home/galeria_platos}" class="btn btn-primary" style="color: white;">Ver más</a>
				</div>
				<div class="col-lg-4 py-5 py-lg-0 text-center">
					<div class="position-relative mx-auto" style="width: 50%; height: 50%; margin-top: 90px;">
						<img class="position-absolute w-100 h-100" src="/img/camaron_feliz.png"
							style="object-fit: contain; left: 50%; transform: translateX(-50%);">
					</div>
				</div>
				<div class="col-lg-4 py-0 py-lg-5 text-center">
					<h1 class="mb-3">Ambientes</h1>
					<p>Sumérgete en la tranquilidad y la belleza de nuestros diferentes ambientes a través de nuestra
						galería de ambientes. Desde vistas impresionantes a la laguna hasta espacios acogedores, cada
						fotografía refleja la atmósfera acogedora y la calidez que ofrecemos en nuestro restaurante. Con
						cada imagen, te invitamos a experimentar la serenidad y la hospitalidad que se entrelazan en
						cada rincón de nuestro espacio, creando el ambiente perfecto para disfrutar de una comida
						inolvidable con tus seres queridos o colegas. Déjate transportar a través de nuestra galería y
						comienza a imaginar tu próxima visita llena de momentos especiales y recuerdos duraderos.</p>
					<a th:href="@{/home/galeria_ambientes}" class="btn btn-primary" style="color: white;">Ver más</a>
				</div>
			</div>
		</div>
	</div>
	<!-- About End -->
	
	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
	<div class="section-title" style="margin-bottom:-60px; margin-top: -115px">
		<h4 class="text-primary text-uppercase" style="letter-spacing: 5px;">Carta</h4>
	</div>
	<div class="offer container-fluid my-5 py-5 text-center position-relative overlay-top overlay-bottom"
		style="background-size: cover; background-position: center;">
		<div class="container py-5">
			<div class="row" id="categoria-container">
			</div>
		</div>
	</div>
	<script>
		$(document).ready(function () {
			$.get("https://carmensandovalcajusol.pythonanywhere.com/categorias", function (categorias) {
				categorias.forEach(function (categoria) {
					var nombreCategoria = categoria.nombre.toLowerCase().replace(/\s+/g, '_').replace(/[^a-z0-9_]/g, '');
					var categoriaHtml = `
                    <div class="col-md-4">
                        <div class="card">
                            <img src="${categoria.img}" class="card-img-top" alt="Imagen de ${categoria.nombre}" style="width: 100%; height: 200px; object-fit: cover;">
                            <div class="card-body">
                                <h1 class="display-4 text-primary mt-3">${categoria.nombre}</h1>
                                <br>
                                <a href="/home/carta_${nombreCategoria.split('_')[0]}" class="btn btn-primary" style="color: white;">Descubre más</a>
                            </div>
                        </div>
                    </div>
                `;
					$("#categoria-container").append(categoriaHtml);
				});
			});
		});
	</script>
	
	<!-- Menus Diarios Start -->
	<div class="container-fluid pt-4">
		<div class="container text-center">
			<div class="menu-container mt-4">
				<div class="menu-item">
					<img th:src="@{/img/cocinero.png}" alt="Menú Diario" class="img-fluid mb-4 menu-image">
					<h3 class="text-primary">Menú del Día</h3>
					<p>¡Descubre nuestra selección especial para hoy!</p>
					<a th:href="@{/home/menu}" class="btn btn-primary" style="color: white;">Ver Menú</a>
				</div>
			</div>
		</div>
	</div>
	<!-- Menus Diarios End -->
	<!-- Reservation Start -->
	<div class="container-fluid my-5">
		<div class="container">
			<div class="reservation position-relative overlay-top overlay-bottom">
				<div class="row align-items-center text-center">
					<div class="p-5 text-center mx-auto">
						<div class="mb-4">
							<h1 class="text-white">¡Reserva Ahora!</h1>
						</div>
						<div class="card" style="width: 15rem;">
							<img src="/img/logo.png" class="card-img-top" alt="logo Ensueño">
							<a th:href="@{/home/reservas}" class="btn btn-primary" style="color: white;">Reservar</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Reservation End -->
	<!-- Testimonial Start -->
	<div class="container-fluid py-5">
		<div class="container">
			<div class="section-title" style="margin-top: -155px">
				<h4 class="text-primary text-uppercase" style="letter-spacing: 5px;">Testimonios</h4>
			</div>
			<div class="owl-carousel testimonial-carousel" id="testimonialCarousel">
			</div>
		</div>
	</div>
	<!-- Testimonial End -->
	<!-- Footer Start -->
	<div class="container-fluid footer text-white mt-4 pt-2 pb-2 px-0 position-relative overlay-top">
		<div class="row mx-0 pt-2 px-sm-3 px-lg-5 mt-1">
			<div class="row mx-0 pt-5 px-sm-3 px-lg-5 mt-4">
				<div class="col-lg-3 col-md-6 mb-5">
					<h4 class="text-white text-uppercase mb-4" style="letter-spacing: 3px;">Contacto</h4>
					<p><i class="fa fa-map-marker-alt mr-2"></i>Calle Buenos aires, Tembladera, Cajamarca-Perú</p>
					<p><i class="fa fa-phone-alt mr-2"></i>+51 942 772 888</p>
					<p class="m-0"><i class="fa fa-envelope mr-2"></i>anyross@gmail.com</p>
				</div>
				<div class="col-lg-3 col-md-6 mb-5">
					<h4 class="text-white text-uppercase mb-4" style="letter-spacing: 3px;">Redes sociales</h4>
					<div class="d-flex justify-content-start">
						<a class="btn btn-lg btn-outline-light btn-lg-square mr-2"
							href="https://wa.me/942772888" target="_blank"><i
								class="fab fa-whatsapp"></i></a>
						<a class="btn btn-lg btn-outline-light btn-lg-square mr-2"
							href="https://www.facebook.com/profile.php?id=100057399433683" target="_blank"><i
								class="fab fa-facebook-f"></i></a>
						<a class="btn btn-lg btn-outline-light btn-lg-square mr-2" href="https://www.instagram.com/ensueno_rest?igshid=OGQ5ZDc2ODk2ZA=="
							target="_blank"><i class="fab fa-instagram"></i></a>
						<a class="btn btn-lg btn-outline-light btn-lg-square" href="https://vm.tiktok.com/ZM66SW6H1/"
							target="_blank"><i class="fab fa-tiktok"></i></a>
					</div>
				</div>
				<div class="col-lg-3 col-md-6 mb-5">
					<h4 class="text-white text-uppercase mb-4" style="letter-spacing: 3px;">Horarios de atención</h4>
					<div>
						<h6 class="text-white text-uppercase">Lunes - Viernes</h6>
						<p>10:00 AM - 6:00 PM</p>
						<h6 class="text-white text-uppercase">Sabados - Domingos</h6>
						<p>9:00 AM - 4:00 PM</p>
					</div>
				</div>
				<div class="col-lg-3 col-md-6 mb-5">
					<img class="logo-img" src="/img/logo.png" alt="Logo de Ensueño">
				</div>
			</div>
			<div class="container-fluid text-center text-white border-top mt-1 py-1 px-sm-3 px-md-5"
				style="border-color: rgba(256, 256, 256, .1) !important;">
				<p class="mb-1 text-white">Copyright &copy; <a class="font-weight-bold" href="#">Ensueño</a></p>
				<p class="m-0 text-white">Designed by <a class="font-weight-bold" href="#">ESLA_MEGACODE</a></p>
			</div>
		</div>
	</div>
	<!-- Footer End -->
	<!-- Back to Top -->
	<a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top">
		<i class="fa fa-angle-double-up" style="color: white;"></i>
	</a>
	<!-- JavaScript Libraries -->
	<script th:src="'https://code.jquery.com/jquery-3.4.1.min.js'"></script>
	<script th:src="'https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js'"></script>
	<script th:src="@{/lib/easing/easing.min.js}" src="../static/lib/easing/easing.min.js"></script>
	<script th:src="@{/lib/waypoints/waypoints.min.js}" src="../static/lib/waypoints/waypoints.min.js"></script>
	<script th:src="@{/lib/owlcarousel/owl.carousel.min.js}"
		src="../static/lib/owlcarousel/owl.carousel.min.js"></script>
	<script th:src="@{/lib/tempusdominus/js/moment.min.js}" src="../static/lib/tempusdominus/js/moment.min.js"></script>
	<script th:src="@{/lib/tempusdominus/js/moment-timezone.min.js}"
		src="../static/lib/tempusdominus/js/moment-timezone.min.js"></script>
	<script th:src="@{/lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js}"
		src="../static/lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>
	<!-- JavaScript Libraries -->
	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
	<!-- Template Javascript -->
	<script th:src="@{/js/main.js}" src="../static/js/main.js"></script>
	<!---->
	<script>
        $(document).ready(async function () {
        try {
            const testimoniosResponse = await fetch('https://carmensandovalcajusol.pythonanywhere.com/testimonios/estado/true/');
            const testimonios = await testimoniosResponse.json();

            if (!testimonios || testimonios.length === 0) {
                console.warn('No hay testimonios disponibles con el estado "true".');
                return;
            }

            console.log('Testimonios con estado "true":', testimonios);

            const userIds = [...new Set(testimonios.map(testimonio => testimonio.usuario))];
            const usuarios = await Promise.all(userIds.map(async userId => {
                const usuarioResponse = await fetch(`https://carmensandovalcajusol.pythonanywhere.com/usuarios/${userId}`);
                return await usuarioResponse.json();
            }));

            if (!usuarios || usuarios.length === 0) {
                console.warn('No hay usuarios disponibles.');
                return;
            }

            const testimoniosPorUsuario = {};
            testimonios.forEach(testimonio => {
                const usuario = usuarios.find(user => user.id_usuario === testimonio.usuario);
                if (usuario) {
                    if (!testimoniosPorUsuario[usuario.id_usuario]) {
                        testimoniosPorUsuario[usuario.id_usuario] = {
                            usuario: usuario,
                            testimonios: []
                        };
                    }
                    testimoniosPorUsuario[usuario.id_usuario].testimonios.push(testimonio);
                }
            });

            if (!testimoniosPorUsuario || Object.keys(testimoniosPorUsuario).length === 0) {
                console.warn('No hay testimonios agrupados por usuario.');
                return;
            }

            Object.values(testimoniosPorUsuario).forEach(usuarioTestimonios => {
                const { usuario, testimonios } = usuarioTestimonios;
                testimonios.forEach(testimonio => {
                    $('#testimonialCarousel').append(
                        `<div class="testimonial-item">
                            <h4>${usuario.nombre} ${usuario.apellido}</h4>
                            <p>${testimonio.testimonio}</p>
                        </div>`
                    );
                });
            });

            $('#testimonialCarousel').owlCarousel({
                items: 3,
                loop: true,
                margin: 20,
                autoplay: true,
                autoplayTimeout: 2000,
                autoplayHoverPause: true,
                dots: true,
                responsiveClass: true,
                responsive: {
                    0: {
                        items: 1
                    },
                    768: {
                        items: 2
                    },
                    1000: {
                        items: 3
                    }
                }
            });
        } catch (error) {
            console.error('Error al cargar testimonios:', error);
        }
    });

    </script>
</body>

</html>